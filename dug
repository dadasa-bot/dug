local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- GUI Setup
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CameraLockGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local textButton = Instance.new("TextButton")
textButton.Name = "LockButton"
textButton.Size = UDim2.new(0, 200, 0, 50)
textButton.Position = UDim2.new(0.5, -100, 0.5, -25)
textButton.Text = "Lock into Player"
textButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
textButton.TextColor3 = Color3.new(1, 1, 1)
textButton.Font = Enum.Font.SourceSans
textButton.TextSize = 24
textButton.Active = true
textButton.Draggable = true
textButton.Parent = screenGui

local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 12)
uiCorner.Parent = textButton

-- State
local isLocked = false
local lockedPlayer = nil

-- Find nearest player
local function getNearestPlayer()
	local myChar = LocalPlayer.Character
	if not myChar or not myChar:FindFirstChild("HumanoidRootPart") then return nil end

	local closest = nil
	local shortestDist = math.huge

	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
			local dist = (myChar.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
			if dist < shortestDist then
				shortestDist = dist
				closest = player
			end
		end
	end

	return closest
end

-- Button click to toggle lock
textButton.MouseButton1Click:Connect(function()
	if not isLocked then
		local target = getNearestPlayer()
		if target and target.Character and target.Character:FindFirstChild("Humanoid") then
			Camera.CameraSubject = target.Character:FindFirstChild("Humanoid")
			Camera.CameraType = Enum.CameraType.Custom -- You can try Attach or Follow for different styles
			isLocked = true
			lockedPlayer = target
			textButton.Text = "Unlock Camera"
			print("Camera locked into: " .. target.Name)
		else
			warn("No valid player to lock into.")
		end
	else
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
			Camera.CameraSubject = LocalPlayer.Character:FindFirstChild("Humanoid")
			Camera.CameraType = Enum.CameraType.Custom
		end
		isLocked = false
		lockedPlayer = nil
		textButton.Text = "Lock into Player"
		print("Camera unlocked.")
	end
end)


